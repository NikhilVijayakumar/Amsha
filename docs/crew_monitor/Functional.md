# Functional Documentation

## 1. Performance Monitoring

The `CrewPerformanceMonitor` is responsible for tracking the runtime behavior of your agents. It captures:

### General Metrics
*   **Tokens**:
    *   `total_tokens`: Sum of prompt and completion tokens.
    *   `prompt_tokens`: Tokens sent to the model.
    *   `completion_tokens`: Tokens generated by the model.
*   **Time**:
    *   `duration_seconds`: Total execution time in seconds.
*   **System Resources**:
    *   `cpu_usage_end_percent`: CPU usage snapshot at the end of execution.
    *   `memory_usage_change_mb`: Net change in memory usage during execution.
    *   `memory_usage_start_bytes` / `end_bytes`: Absolute memory values.

### GPU Metrics (If NVIDIA GPU is available)
*   Logs usage for all available GPUs.
*   **Metrics**:
    *   `utilization_percent`: GPU core utilization.
    *   `memory_change_mb`: VRAM usage change.

---

## 2. Contribution Analysis

The `ContributionAnalyzer` determines the value provided by each LLM or agent in a multi-agent system.

### How it Works
1.  **Input**: Takes a JSON file containing clustered features/outputs.
2.  **Calculation**:
    *   Iterates through each feature.
    *   Counts the number of contributors (agents/LLMs) for that specific feature.
    *   Formula: `(Contributors for Feature / Total LLMs involved) * 100`.
3.  **Output**: Adds a `contributionPercentage` field to the JSON data.
4.  **Export**: Saves the enriched data to JSON and an Excel summary.

### Use Case
This is particularly useful when you have multiple agents generating potential solutions (e.g., in a "voting" or "ensemble" architecture) and you want to know which solutions had the broadest consensus.

---

## 3. Reporting

The `ReportingTool` bridges the gap between raw data and human analysis.

### Feature: Generate Report
*   **Input**: A directory of JSON logs.
*   **Process**: Extracts key metrics (scores, names, summaries) based on a flexible YAML configuration.
*   **Output**: An Excel file with:
    *   **Evaluation Summary**: Detailed rows for each item.
    *   **Mean**: Average scores across all items.

### Feature: Combine Reports
*   **Input**: Multiple Excel reports generated by the previous step.
*   **Process**: Merges them into a single workbook.
*   **Output**:
    *   **Sheets**: One sheet per source report.
    *   **Summary Sheet**: A pivot table comparing metrics across all reports side-by-side.
